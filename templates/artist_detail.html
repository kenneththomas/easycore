<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ artist.name }} - Artist Profile</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
    <style>
      /* Enhanced Artist Detail Styles */
      .container { 
        max-width: 1200px; 
        margin: 0 auto; 
        padding: 0 20px; 
      }
      
      /* Enhanced Hero Section */
      .hero-section {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 60px 0 40px;
        margin-bottom: 40px;
        position: relative;
        overflow: hidden;
      }
      
      .hero-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
        opacity: 0.3;
      }
      
      .hero-content {
        position: relative;
        z-index: 2;
        display: grid;
        grid-template-columns: auto 1fr;
        gap: 40px;
        align-items: center;
      }
      
      .hero-avatar {
        width: 160px;
        height: 160px;
        border-radius: 50%;
        background: #f2f2f2 center/cover no-repeat;
        border: 4px solid rgba(255,255,255,0.3);
        box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        flex-shrink: 0;
      }
      
      .hero-info h1 {
        font-size: 3rem;
        font-weight: 700;
        margin: 0 0 16px 0;
        text-shadow: 0 2px 4px rgba(0,0,0,0.3);
      }
      
      .hero-bio {
        font-size: 1.1rem;
        line-height: 1.6;
        margin-bottom: 24px;
        opacity: 0.9;
      }
      
      .hero-stats {
        display: flex;
        gap: 32px;
        margin-bottom: 24px;
      }
      
      .stat-item {
        text-align: center;
      }
      
      .stat-number {
        font-size: 1.8rem;
        font-weight: 700;
        display: block;
      }
      
      .stat-label {
        font-size: 0.9rem;
        opacity: 0.8;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }
      
      .hero-actions {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
      }
      
      .btn-primary {
        background: rgba(255,255,255,0.2);
        color: white;
        border: 2px solid rgba(255,255,255,0.3);
        padding: 12px 24px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
      }
      
      .btn-primary:hover {
        background: rgba(255,255,255,0.3);
        border-color: rgba(255,255,255,0.5);
        transform: translateY(-2px);
      }
      
      /* Avatar Upload Form */
      .avatar-upload {
        background: rgba(255,255,255,0.1);
        padding: 16px;
        border-radius: 8px;
        backdrop-filter: blur(10px);
        margin-top: 16px;
      }
      
      .avatar-upload label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
      }
      
      .avatar-upload input[type="file"] {
        margin-bottom: 12px;
      }
      
      /* Content Sections */
      .content-grid {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 40px;
        margin-bottom: 40px;
      }
      
      .main-content {
        display: flex;
        flex-direction: column;
        gap: 40px;
      }
      
      .sidebar {
        display: flex;
        flex-direction: column;
        gap: 32px;
      }
      
      .section {
        background: white;
        border-radius: 12px;
        padding: 24px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        border: 1px solid #f0f0f0;
      }
      
      .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 12px;
        border-bottom: 2px solid #f5f5f5;
      }
      
      .section-title {
        font-size: 1.5rem;
        font-weight: 700;
        color: #333;
        margin: 0;
      }
      
      .section-count {
        background: #667eea;
        color: white;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.9rem;
        font-weight: 600;
      }
      
      /* Grid Layouts */
      .media-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 20px;
      }
      
      .media-card {
        background: white;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
        text-decoration: none;
        color: inherit;
        border: 1px solid #f0f0f0;
      }
      
      .media-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 32px rgba(0,0,0,0.15);
      }
      
      .media-thumbnail {
        width: 100%;
        height: 160px;
        background: #f5f5f5 center/cover no-repeat;
        position: relative;
      }
      
      .media-thumbnail::before {
        content: '‚ñ∂';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(0,0,0,0.7);
        color: white;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        opacity: 0;
        transition: opacity 0.3s ease;
      }
      
      .media-card:hover .media-thumbnail::before {
        opacity: 1;
      }
      
      .media-info {
        padding: 16px;
      }
      
      .media-title {
        font-weight: 600;
        font-size: 1rem;
        margin-bottom: 8px;
        line-height: 1.4;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }
      
      .media-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.85rem;
        color: #666;
      }
      
      .media-stats {
        display: flex;
        gap: 12px;
      }
      
      .media-stat {
        display: flex;
        align-items: center;
        gap: 4px;
      }
      
      /* Related Artists */
      .related-artists {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        gap: 16px;
      }
      
      .artist-card {
        text-align: center;
        text-decoration: none;
        color: inherit;
        transition: transform 0.3s ease;
      }
      
      .artist-card:hover {
        transform: translateY(-2px);
      }
      
      .artist-avatar {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        background: #f2f2f2 center/cover no-repeat;
        margin: 0 auto 8px;
        border: 2px solid #f0f0f0;
      }
      
      .artist-name {
        font-size: 0.9rem;
        font-weight: 600;
        line-height: 1.3;
      }
      
      /* Playlists */
      .playlist-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }
      
      .playlist-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px;
        background: #f8f9fa;
        border-radius: 8px;
        text-decoration: none;
        color: inherit;
        transition: background 0.3s ease;
      }
      
      .playlist-item:hover {
        background: #e9ecef;
      }
      
      .playlist-icon {
        width: 40px;
        height: 40px;
        background: #667eea;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 600;
      }
      
      /* Responsive Design */
      @media (max-width: 768px) {
        .hero-content {
          grid-template-columns: 1fr;
          text-align: center;
          gap: 24px;
        }
        
        .hero-avatar {
          width: 120px;
          height: 120px;
          margin: 0 auto;
        }
        
        .hero-info h1 {
          font-size: 2rem;
        }
        
        .hero-stats {
          justify-content: center;
        }
        
        .content-grid {
          grid-template-columns: 1fr;
          gap: 24px;
        }
        
        .media-grid {
          grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
        }
        
        .related-artists {
          grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
        }
      }
      
      @media (max-width: 480px) {
        .container {
          padding: 0 16px;
        }
        
        .hero-section {
          padding: 40px 0 30px;
        }
        
        .hero-stats {
          flex-direction: column;
          gap: 16px;
        }
        
        .media-grid {
          grid-template-columns: 1fr;
        }
      }
      
      /* Empty States */
      .empty-state {
        text-align: center;
        padding: 40px 20px;
        color: #666;
      }
      
      .empty-state-icon {
        font-size: 3rem;
        margin-bottom: 16px;
        opacity: 0.5;
      }
      
      /* Loading States */
      .loading {
        opacity: 0.6;
        pointer-events: none;
      }
      
      /* Dropdown menu for compact nav */
      .dropdown { position: relative; display: inline-block; }
      .dropbtn { background: transparent; color: white; border: 1px solid rgba(255,255,255,0.25); padding: 6px 10px; border-radius: 4px; cursor: pointer; }
      .dropdown-content { display: none; position: absolute; right: 0; background-color: #fff; min-width: 200px; box-shadow: 0 8px 16px rgba(0,0,0,0.15); border-radius: 6px; overflow: hidden; z-index: 1001; }
      .dropdown-content a { color: #333; padding: 10px 12px; text-decoration: none; display: block; border-bottom: 1px solid #f0f0f0; }
      .dropdown-content a:last-child { border-bottom: none; }
      .dropdown:hover .dropdown-content { display: block; }
      .nav-links .dropdown { margin-left: 0.25rem; }
    </style>
  </head>
  <body>
    <nav class="navbar">
      <div class="nav-content">
        <a href="{{ url_for('index') }}" class="nav-logo">breeztube</a>
        <div class="nav-links">
          <a href="{{ url_for('index') }}">Home</a>
          <a href="{{ url_for('playlists') }}">Playlists</a>
          <a href="{{ url_for('tracks_index') }}">Tracks</a>
          <a href="{{ url_for('artists_index') }}">Artists</a>
          <div class="dropdown">
            <button class="dropbtn">Upload</button>
            <div class="dropdown-content">
              <a href="{{ url_for('add_video') }}">Add Video</a>
              <a href="{{ url_for('add_multiple_videos') }}">Add Multiple Videos</a>
              <a href="{{ url_for('bulk_upload') }}">Bulk Upload Videos</a>
              <a href="{{ url_for('add_track') }}">Add Track</a>
            </div>
          </div>
          <div class="dropdown">
            <button class="dropbtn">Tools</button>
            <div class="dropdown-content">
              <a href="{{ url_for('extract_mp3') }}">Extract MP3</a>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <!-- Enhanced Hero Section -->
    <section class="hero-section">
      <div class="container">
        <div class="hero-content">
          <div class="hero-avatar" style="background-image:url('{% if artist.avatar_path %}{{ url_for('static', filename=artist.avatar_path) }}{% endif %}')"></div>
          <div class="hero-info">
            <h1>{{ artist.name }}</h1>
            {% if artist.bio %}
              <div class="hero-bio">{{ artist.bio }}</div>
            {% endif %}
            
            <div class="hero-stats">
              <div class="stat-item">
                <span class="stat-number">{{ total_tracks }}</span>
                <span class="stat-label">Tracks</span>
              </div>
              <div class="stat-item">
                <span class="stat-number">{{ total_videos }}</span>
                <span class="stat-label">Videos</span>
              </div>
              <div class="stat-item">
                <span class="stat-number">{{ total_plays }}</span>
                <span class="stat-label">Plays</span>
              </div>
              <div class="stat-item">
                <span class="stat-number">{{ total_likes }}</span>
                <span class="stat-label">Likes</span>
              </div>
            </div>
            
            <div class="hero-actions">
              {% if tracks or videos %}
                <a href="#content" class="btn-primary">View All Content</a>
              {% endif %}
              <a href="{{ url_for('add_track') }}" class="btn-primary">Add Track</a>
              <a href="{{ url_for('add_video') }}" class="btn-primary">Add Video</a>
            </div>
            
            <div class="avatar-upload">
              <form action="{{ url_for('upload_artist_avatar', artist_id=artist.id) }}" method="post" enctype="multipart/form-data">
                <label>Update Artist Avatar:</label>
                <input type="file" name="avatar" accept="image/*" />
                <button class="button" type="submit">Upload</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </section>

    <div class="container" id="content">
      <div class="content-grid">
        <div class="main-content">
          <!-- Tracks Section -->
          {% if tracks %}
          <div class="section">
            <div class="section-header">
              <h2 class="section-title">Tracks</h2>
              <span class="section-count">{{ tracks|length }}</span>
            </div>
            <div class="media-grid">
              {% for track in tracks %}
              <a href="{{ url_for('track_detail', track_id=track.id) }}" class="media-card">
                <div class="media-thumbnail" style="background-image:url('{% if track.background_image_path %}{{ url_for('static', filename=track.background_image_path) }}{% endif %}')"></div>
                <div class="media-info">
                  <div class="media-title">{{ track.nickname or track.original_filepath }}</div>
                  <div class="media-meta">
                    <div class="media-stats">
                      <span class="media-stat">üéµ Track</span>
                      <span class="media-stat">üëÅÔ∏è {{ track.view_count or 0 }}</span>
                      <span class="media-stat">‚ù§Ô∏è {{ track.likes or 0 }}</span>
                    </div>
                    {% if track.tags %}
                      <span class="media-tags">{{ track.tags[:20] }}{% if track.tags|length > 20 %}...{% endif %}</span>
                    {% endif %}
                  </div>
                </div>
              </a>
              {% endfor %}
            </div>
          </div>
          {% endif %}

          <!-- Videos Section -->
          {% if videos %}
          <div class="section">
            <div class="section-header">
              <h2 class="section-title">Videos</h2>
              <span class="section-count">{{ videos|length }}</span>
            </div>
            <div class="media-grid">
              {% for video in videos %}
              <a href="{{ url_for('video_detail', video_id=video.id) }}" class="media-card">
                <div class="media-thumbnail" style="background-image:url('{% if video.thumbnail_path %}{{ url_for('static', filename=video.thumbnail_path) }}{% endif %}')"></div>
                <div class="media-info">
                  <div class="media-title">{{ video.nickname or video.original_filepath }}</div>
                  <div class="media-meta">
                    <div class="media-stats">
                      <span class="media-stat">üé• Video</span>
                      <span class="media-stat">üëÅÔ∏è {{ video.view_count or 0 }}</span>
                      <span class="media-stat">‚ù§Ô∏è {{ video.likes or 0 }}</span>
                    </div>
                    {% if video.tags %}
                      <span class="media-tags">{{ video.tags[:20] }}{% if video.tags|length > 20 %}...{% endif %}</span>
                    {% endif %}
                  </div>
                </div>
              </a>
              {% endfor %}
            </div>
          </div>
          {% endif %}

          <!-- Empty State -->
          {% if not tracks and not videos %}
          <div class="section">
            <div class="empty-state">
              <div class="empty-state-icon">üéµ</div>
              <h3>No Content Yet</h3>
              <p>This artist doesn't have any tracks or videos yet.</p>
              <div style="margin-top: 20px;">
                <a href="{{ url_for('add_track') }}" class="btn-primary">Add First Track</a>
                <a href="{{ url_for('add_video') }}" class="btn-primary">Add First Video</a>
              </div>
            </div>
          </div>
          {% endif %}
        </div>

        <div class="sidebar">
          <!-- Related Artists -->
          {% if related_artists %}
          <div class="section">
            <div class="section-header">
              <h3 class="section-title">Related Artists</h3>
            </div>
            <div class="related-artists">
              {% for related in related_artists %}
              <a href="{{ url_for('artist_detail', artist_id=related.id) }}" class="artist-card">
                <div class="artist-avatar" style="background-image:url('{% if related.avatar_path %}{{ url_for('static', filename=related.avatar_path) }}{% endif %}')"></div>
                <div class="artist-name">{{ related.name }}</div>
              </a>
              {% endfor %}
            </div>
          </div>
          {% endif %}

          <!-- Playlists -->
          {% if artist_playlists %}
          <div class="section">
            <div class="section-header">
              <h3 class="section-title">Featured In</h3>
              <span class="section-count">{{ artist_playlists|length }}</span>
            </div>
            <div class="playlist-list">
              {% for playlist in artist_playlists %}
              <a href="{{ url_for('playlist_detail', playlist_id=playlist.id) }}" class="playlist-item">
                <div class="playlist-icon">üìÅ</div>
                <div>
                  <div style="font-weight: 600;">{{ playlist.name }}</div>
                  <div style="font-size: 0.8rem; color: #666;">{{ playlist.description[:50] }}{% if playlist.description and playlist.description|length > 50 %}...{% endif %}</div>
                </div>
              </a>
              {% endfor %}
            </div>
          </div>
          {% endif %}

          <!-- Artist Info -->
          <div class="section">
            <div class="section-header">
              <h3 class="section-title">About</h3>
            </div>
            <div>
              <p><strong>Joined:</strong> {{ artist.created_at.strftime('%B %Y') if artist.created_at else 'Unknown' }}</p>
              {% if artist.bio %}
                <p><strong>Bio:</strong> {{ artist.bio }}</p>
              {% else %}
                <p><em>No biography available.</em></p>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Smooth scrolling for anchor links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) {
            target.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
          }
        });
      });

      // Add loading states to forms
      document.querySelectorAll('form').forEach(form => {
        form.addEventListener('submit', function() {
          const submitBtn = this.querySelector('button[type="submit"]');
          if (submitBtn) {
            submitBtn.textContent = 'Uploading...';
            submitBtn.disabled = true;
          }
        });
      });
    </script>
  </body>
</html>


