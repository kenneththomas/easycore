<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ author }} — Profile</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <style>
    .profile-header { display:flex; align-items:center; gap:16px; margin: 16px 0; }
    .avatar { width:72px; height:72px; border-radius:50%; background:#e3f2fd; display:inline-flex; align-items:center; justify-content:center; font-weight:700; color:#1976d2; font-size:28px; }
    .counts { color:#666; margin-top:4px; }
    .chip { background:#e3f2fd; color:#1976d2; padding:4px 10px; border-radius:16px; margin-right:6px; font-size:12px; }
    .feed { margin-top:20px; display:grid; gap:12px; }
    .item { background:#fff; border:1px solid #eee; border-radius:8px; padding:12px; }
    .item-header { display:flex; gap:8px; align-items:center; color:#555; font-size:13px; }
    .item-kind { text-transform: uppercase; font-weight:700; color:#1976d2; font-size:11px; }
    .item-title a { color:inherit; text-decoration: none; }
    .item-title a:hover { color:#1976d2; text-decoration: underline; }
    .item-content { margin-top:6px; font-size:14px; }
  </style>
  </head>
<body>
  {% from 'navbar.html' import render_navbar %}
  {{ render_navbar() }}

  <div class="container">
    <div class="profile-header">
      <div class="avatar" style="background-image:url('{% if author_profile and author_profile.avatar_path %}{{ url_for('static', filename=author_profile.avatar_path) }}{% endif %}'); background-size:cover; background-position:center;">{% if not (author_profile and author_profile.avatar_path) %}{{ author[:1].upper() }}{% endif %}</div>
      <div>
        <h1 style="margin:0;">{{ author }}</h1>
        <div class="counts">{{ total_comments }} comments
          <span class="chip">Videos: {{ kind_counts.video }}</span>
          <span class="chip">Playlists: {{ kind_counts.playlist }}</span>
          <span class="chip">Tags: {{ kind_counts.tag }}</span>
          <span class="chip">Tracks: {{ kind_counts.track }}</span>
        </div>
      </div>
    </div>

    <form action="{{ url_for('upload_author_avatar', slug=slug) }}" method="post" enctype="multipart/form-data" style="margin-top:10px;">
      <label>Upload Author Avatar:</label>
      <input type="file" name="avatar" accept="image/*" />
      <button class="button" type="submit">Upload</button>
    </form>

    <div class="feed">
      {% for i in items %}
      <div class="item">
        <div class="item-header">
          <span class="item-kind">{{ i.kind }}</span>
          <span>on</span>
          <span class="item-title"><a href="{{ i.context_url }}">{{ i.context_title }}</a></span>
          <span>·</span>
          <span>{{ i.timestamp.strftime('%m/%d/%Y %I:%M %p') }}</span>
          <span>· ❤️ {{ i.likes }}</span>
        </div>
        <div class="item-content">{{ i.content }}</div>
      </div>
      {% endfor %}
      {% if not items %}
        <p>No comments yet.</p>
      {% endif %}
    </div>
  </div>
 </body>
 </html>


