<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Tracks</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
    <style>
      .container { max-width: 960px; margin: 20px auto; padding: 0 12px; }
      .toolbar { display:flex; justify-content: space-between; align-items:center; margin-bottom: 16px; }
      .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 16px; }
      .card { border: 1px solid #e6e6e6; border-radius: 8px; overflow: hidden; background: #fff; }
      .cover { height: 140px; background: #f2f2f2 center/cover no-repeat; }
      .card-body { padding: 10px 12px; }
      .title { font-weight: 600; margin: 0 0 6px; }
      .meta { font-size: 12px; color: #666; }
      .pagination { margin: 16px 0; display:flex; gap:8px; }
      a.button { padding: 8px 10px; border: 1px solid #ccc; border-radius: 6px; text-decoration: none; }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="toolbar">
        <h2 style="margin:0;">Audio Tracks</h2>
        <div>
          <a class="button" href="{{ url_for('add_track') }}">Upload Track</a>
          <a class="button" href="{{ url_for('index') }}">Videos</a>
        </div>
      </div>

      <div class="grid">
        {% for t in tracks %}
          <a class="card" href="{{ url_for('track_detail', track_id=t.id) }}" style="color:inherit; text-decoration:none;">
            <div class="cover" style="background-image:url('{% if t.background_image_path %}{{ url_for('static', filename=t.background_image_path) }}{% endif %}')"></div>
            <div class="card-body">
              <div class="title">{{ t.nickname or t.original_filepath }}</div>
              <div class="meta">{{ (t.tags or '')[:80] }}</div>
            </div>
          </a>
        {% endfor %}
      </div>

      <div class="pagination">
        {% if page > 1 %}
          <a class="button" href="{{ url_for('tracks_index', page=page-1, sort_by=sort_by) }}">Prev</a>
        {% endif %}
        {% if page < total_pages %}
          <a class="button" href="{{ url_for('tracks_index', page=page+1, sort_by=sort_by) }}">Next</a>
        {% endif %}
      </div>
    </div>
  </body>
 </html>

